"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[435],{3435:(t,s,e)=>{e.r(s),e.d(s,{default:()=>d});var a=e(7757),i=e.n(a),n=e(6226),r=e(41),o=e(3252);function l(t,s,e,a,i,n,r){try{var o=t[n](r),l=o.value}catch(t){return void e(t)}o.done?s(l):Promise.resolve(l).then(a,i)}function c(t){return function(){var s=this,e=arguments;return new Promise((function(a,i){var n=t.apply(s,e);function r(t){l(n,a,i,r,o,"next",t)}function o(t){l(n,a,i,r,o,"throw",t)}r(void 0)}))}}const g={components:{ImageUpload:n.Z,Image},name:"UpdateBlog",created:function(){this.$store.commit("setCurrentBlog",parseInt(this.id))},props:["id"],computed:{isProcessing:function(){return this.loading},blog:function(){return this.$store.getters.getCurrentBlog}},data:function(){return{loading:!1,message:"",uploadValue:""}},mounted:function(){this.$store.commit("setCurrentBlog",parseInt(this.id))},methods:{setImageValue:function(t){this.blog.image="",this.imgDatString=t},createPost:function(){var t=this;return c(i().mark((function s(){var e,a,n,l;return i().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:if(n=function(t,s){for(var e=t.split(","),a=e[0].match(/:(.*?);/)[1],i=atob(e[1]),n=i.length,r=new Uint8Array(n);n--;)r[n]=i.charCodeAt(n);return new File([r],s,{type:a})},t.loading=!t.loading,e=t,a=function(){var t=c(i().mark((function t(s){return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(s.status){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,axios.put("/api/blog/".concat(e.id),{image:s.message,title:e.blog.title,content:e.blog.content}).then((function(t){e.message=t.data})).catch((function(t){e.message=t})).finally((function(t){console.log({image_data:s.message,title:e.title,content:e.content}),console.log(e.message),e.loading=!e.loading,e.$router.push({name:"blog-details",params:{id:"".concat(e.message.success.id)}})}));case 4:case"end":return t.stop()}}),t)})));return function(s){return t.apply(this,arguments)}}(),!t.blog.image.startsWith("https://firebases")){s.next=8;break}return s.next=7,a({message:t.blog.image,status:!0});case 7:return s.abrupt("return");case 8:return l=n(e.imgDatString,"file.jpg"),s.next=11,(0,o.c)(e.title,r.m,l,a);case 11:case"end":return s.stop()}}),s)})))()}}};const d=(0,e(1900).Z)(g,(function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"main-content"},[e("div",{staticClass:"rs-blog inner single pt-100 pb-100 md-pt-80 md-pb-80"},[e("div",{staticClass:"container"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-lg-8"},[e("div",{staticClass:"blog-part"},[e("div",{staticClass:"bs-contact-form pt-45"},[e("h3",{staticClass:"title"},[t._v("Add A Post")]),t._v(" "),e("div",{attrs:{id:"form-messages"}}),t._v(" "),e("form",{on:{submit:function(s){return s.preventDefault(),t.createPost.apply(null,arguments)}}},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-lg-12"},[e("ImageUpload",{attrs:{imageToUpdate:this.blog.image},on:{"get-image-string":t.setImageValue}})],1),t._v(" "),e("div",{staticClass:"col-lg-12"},[e("div",{staticClass:"form-field"},[e("label",[t._v("Title")]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.blog.title,expression:"blog.title"}],attrs:{type:"text",name:"email"},domProps:{value:t.blog.title},on:{input:function(s){s.target.composing||t.$set(t.blog,"title",s.target.value)}}})])]),t._v(" "),e("div",{staticClass:"col-lg-12"},[e("div",{staticClass:"form-field mb-30"},[e("label",[t._v("Content")]),t._v(" "),e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.blog.content,expression:"blog.content"}],attrs:{rows:"7",id:"message",name:"message"},domProps:{value:t.blog.content},on:{input:function(s){s.target.composing||t.$set(t.blog,"content",s.target.value)}}})]),t._v(" "),e("div",{staticClass:"form-button mt-30"},[e("button",{staticClass:"readon radius",attrs:{disabled:t.isProcessing},domProps:{textContent:t._s(t.isProcessing?"posting":"post")}})])])])])])])]),t._v(" "),t._e()]),t._v(" "),e("div",{attrs:{id:"sticky-end"}})])])])}),[function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"blog-sidebar",attrs:{id:"sticky-sidebar"}},[e("div",{staticClass:"sidebar-search sidebar-grid shadow mb-50"},[e("form",{staticClass:"search-bar"},[e("input",{attrs:{type:"text",placeholder:"Search..."}}),t._v(" "),e("span",[e("button",{attrs:{type:"submit"}},[e("i",{staticClass:"flaticon-search"})])])])]),t._v(" "),e("div",{staticClass:"sidebar-popular-post sidebar-grid shadow mb-50"},[e("div",{staticClass:"sidebar-title"},[e("h3",{staticClass:"title mb-20"},[t._v("Recent Post")])]),t._v(" "),e("div",{staticClass:"single-post mb-20"},[e("div",{staticClass:"post-image"},[e("a",{attrs:{href:"blog-single.html"}},[e("img",{attrs:{src:"assets/images/blog/small/1.jpg",alt:"post image"}})])]),t._v(" "),e("div",{staticClass:"post-desc"},[e("div",{staticClass:"post-title"},[e("h5",{staticClass:"margin-0"},[e("a",{attrs:{href:"blog-single.html"}},[t._v("Covid-19 threatens the next generation of smartphones\n                      ")])])]),t._v(" "),e("ul",[e("li",[e("i",{staticClass:"fa fa-calendar"}),t._v(" 28 June, 2019")])])])]),t._v(" "),e("div",{staticClass:"single-post"},[e("div",{staticClass:"post-image"},[e("a",{attrs:{href:"blog-single.html"}},[e("img",{attrs:{src:"assets/images/blog/small/5.jpg",alt:"post image"}})])]),t._v(" "),e("div",{staticClass:"post-desc"},[e("div",{staticClass:"post-title"},[e("h5",{staticClass:"margin-0"},[e("a",{attrs:{href:"blog-single.html"}},[t._v("Covid-19 threatens the next generation of smartphones\n                      ")])])]),t._v(" "),e("ul",[e("li",[e("i",{staticClass:"fa fa-calendar"}),t._v(" 28 June, 2019")])])])])]),t._v(" "),e("div",{staticClass:"sidebar-categories sidebar-grid shadow"},[e("div",{staticClass:"sidebar-title"},[e("h3",{staticClass:"title mb-20"},[t._v("Categories")])]),t._v(" "),e("ul",[e("li",[e("a",{attrs:{href:"#"}},[t._v("Consulting")])]),t._v(" "),e("li",[e("a",{attrs:{href:"#"}},[t._v("Creative")])]),t._v(" "),e("li",[e("a",{attrs:{href:"#"}},[t._v("Development")])]),t._v(" "),e("li",[e("a",{attrs:{href:"#"}},[t._v("Finance")])]),t._v(" "),e("li",[e("a",{attrs:{href:"#"}},[t._v("Management")])]),t._v(" "),e("li",[e("a",{attrs:{href:"#"}},[t._v("Strategy")])])])])])}],!1,null,"05cd8af7",null).exports}}]);